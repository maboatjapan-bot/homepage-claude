---
// ç¯å¢ƒå˜é‡æµ‹è¯•é¡µé¢
---

<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç¯å¢ƒå˜é‡æµ‹è¯•</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      padding: 2rem;
      background: #f5f5f5;
    }
    .card {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .status {
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 4px;
    }
    .success { background: #d4edda; color: #155724; }
    .error { background: #f8d7da; color: #721c24; }
    .warning { background: #fff3cd; color: #856404; }
    pre {
      background: #f5f5f5;
      padding: 1rem;
      border-radius: 4px;
      overflow-x: auto;
    }
    code {
      background: #f5f5f5;
      padding: 0.2rem 0.4rem;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>ğŸ” ç¯å¢ƒå˜é‡æµ‹è¯•</h1>
    
    <div class="status">
      <h3>Access Key çŠ¶æ€:</h3>
      <pre id="result">æ£€æµ‹ä¸­...</pre>
    </div>

    <div class="status">
      <h3>è¡¨å•æµ‹è¯•:</h3>
      <p>æµ‹è¯•å‘é€åˆ° Web3Forms</p>
      <button onclick="testForm()" style="padding: 10px 20px; background: #00BFA5; color: white; border: none; border-radius: 4px; cursor: pointer;">
        æµ‹è¯•è¡¨å•æäº¤
      </button>
      <pre id="form-result"></pre>
    </div>
  </div>

  <script>
    const accessKey = import.meta.env.PUBLIC_WEB3FORMS_ACCESS_KEY;
    const resultDiv = document.getElementById('result');
    
    if (accessKey) {
      if (accessKey === 'YOUR_ACCESS_KEY_HERE') {
        resultDiv.innerHTML = '<span class="error">âŒ ç¯å¢ƒå˜é‡æœªé…ç½®ï¼ä»åœ¨ä½¿ç”¨å ä½ç¬¦ã€‚</span>';
        resultDiv.className = 'status error';
      } else {
        resultDiv.innerHTML = `<span class="success">âœ… ç¯å¢ƒå˜é‡å·²é…ç½®</span>\n\nAccess Key: ${accessKey.substring(0, 8)}...${accessKey.substring(accessKey.length - 4)}`;
        resultDiv.className = 'status success';
      }
    } else {
      resultDiv.innerHTML = '<span class="error">âŒ ç¯å¢ƒå˜é‡ä¸å­˜åœ¨</span>';
      resultDiv.className = 'status error';
    }

    async function testForm() {
      const formResult = document.getElementById('form-result');
      formResult.textContent = 'å‘é€ä¸­...';
      
      try {
        const response = await fetch('https://api.web3forms.com/submit', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            access_key: accessKey,
            subject: 'ãƒ†ã‚¹ãƒˆãƒ¡ãƒ¼ãƒ«',
            from_name: 'ç’°å¢ƒå¤‰æ•°ãƒ†ã‚¹ãƒˆ',
            name: 'ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼',
            email: 'test@example.com',
            message: 'ã“ã‚Œã¯ç’°å¢ƒå¤‰æ•°ã®ãƒ†ã‚¹ãƒˆã§ã™ã€‚'
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          formResult.innerHTML = `<span class="success">âœ… è¡¨å•æäº¤æˆåŠŸï¼</span>\n\n${JSON.stringify(result, null, 2)}`;
        } else {
          formResult.innerHTML = `<span class="error">âŒ è¡¨å•æäº¤å¤±è´¥</span>\n\n${JSON.stringify(result, null, 2)}`;
        }
      } catch (error) {
        formResult.innerHTML = `<span class="error">âŒ è¯·æ±‚å¤±è´¥</span>\n\n${error.message}`;
      }
    }
  </script>
</body>
</html>
