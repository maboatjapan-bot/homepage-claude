---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import FadeIn from '../components/FadeIn.astro';
import ScaleIn from '../components/ScaleIn.astro';
---

<BaseLayout>
  <Header />


  <!-- Hero -->
  <section class="pt-20 py-16 px-6 bg-white">
    <div class="max-w-4xl mx-auto text-center">
      <FadeIn>
        <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold tracking-tight text-slate-900 mb-6">
          お問い合わせ
        </h1>
        <p class="text-xl text-slate-600 max-w-2xl mx-auto">
          製品・サービスに関するお問い合わせや、<br class="hidden sm:block" />
          ご相談などお気軽にどうぞ。
        </p>
      </FadeIn>
    </div>
  </section>

  <!-- Contact Form -->
  <section class="pt-20 py-16 px-6 bg-slate-50">
    <div class="max-w-3xl mx-auto">
      <ScaleIn delay={0} from={0.95}>
        <div class="bg-white rounded-3xl p-8 md:p-12 shadow-xl shadow-slate-200/50">
          <form
            id="contact-form"
            action="https://api.web3forms.com/submit"
            method="POST"
            class="space-y-6"
          >
            <!-- Web3Forms Access Key -->
            <input type="hidden" name="access_key" value="09e5cc5b-a31b-40ee-b00f-f5eb9a47350c">

            <!-- Subject -->
            <input type="hidden" name="subject" value="ウェブサイトからのお問い合わせ">

            <!-- From Name -->
            <input type="hidden" name="from_name" value="Swiftechie ウェブサイト">

            <!-- Redirect URL (optional - uncomment to use custom success page) -->
            <!-- <input type="hidden" name="redirect" value="/contact/success"> -->

            <div class="grid md:grid-cols-2 gap-6">
              <!-- Name -->
              <div>
                <label for="name" class="block text-sm font-medium text-slate-700 mb-2">
                  お名前 <span class="text-red-500">*</span>
                </label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  required
                  class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-brand-teal focus:ring-2 focus:ring-brand-teal/20 outline-none transition-all"
                  placeholder="山田 太郎"
                />
              </div>

              <!-- Company -->
              <div>
                <label for="company" class="block text-sm font-medium text-slate-700 mb-2">
                  会社名
                </label>
                <input
                  type="text"
                  id="company"
                  name="company"
                  class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-brand-teal focus:ring-2 focus:ring-brand-teal/20 outline-none transition-all"
                  placeholder="株式会社○○"
                />
              </div>
            </div>

            <div class="grid md:grid-cols-2 gap-6">
              <!-- Email -->
              <div>
                <label for="email" class="block text-sm font-medium text-slate-700 mb-2">
                  メールアドレス <span class="text-red-500">*</span>
                </label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-brand-teal focus:ring-2 focus:ring-brand-teal/20 outline-none transition-all"
                  placeholder="example@company.com"
                />
              </div>

              <!-- Phone -->
              <div>
                <label for="phone" class="block text-sm font-medium text-slate-700 mb-2">
                  電話番号
                </label>
                <input
                  type="tel"
                  id="phone"
                  name="phone"
                  class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-brand-teal focus:ring-2 focus:ring-brand-teal/20 outline-none transition-all"
                  placeholder="03-0000-0000"
                />
              </div>
            </div>

            <!-- Inquiry Type -->
            <div>
              <label for="type" class="block text-sm font-medium text-slate-700 mb-2">
                お問い合わせ種別 <span class="text-red-500">*</span>
              </label>
              <select
                id="type"
                name="type"
                required
                class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-brand-teal focus:ring-2 focus:ring-brand-teal/20 outline-none transition-all bg-white"
              >
                <option value="">選択してください</option>
                <option value="製品に関するお問い合わせ">製品に関するお問い合わせ</option>
                <option value="サービスに関するお問い合わせ">サービスに関するお問い合わせ</option>
                <option value="採用に関するお問い合わせ">採用に関するお問い合わせ</option>
                <option value="その他">その他</option>
              </select>
            </div>

            <!-- Message -->
            <div>
              <label for="message" class="block text-sm font-medium text-slate-700 mb-2">
                お問い合わせ内容 <span class="text-red-500">*</span>
              </label>
              <textarea
                id="message"
                name="message"
                required
                rows="6"
                class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-brand-teal focus:ring-2 focus:ring-brand-teal/20 outline-none transition-all resize-none"
                placeholder="お問い合わせ内容をご記入ください"
              ></textarea>
            </div>

            <!-- Privacy Policy -->
            <div class="flex items-start gap-3">
              <input
                type="checkbox"
                id="privacy"
                name="privacy"
                required
                class="mt-1 w-5 h-5 rounded border-slate-300 text-brand-teal focus:ring-brand-teal"
              />
              <label for="privacy" class="text-sm text-slate-600">
                <a href="/privacy" class="text-brand-teal hover:underline">プライバシーポリシー</a>
                に同意する
              </label>
            </div>

            <!-- Submit Button -->
            <button
              type="submit"
              class="w-full px-8 py-4 bg-brand-teal hover:bg-brand-teal-dark text-white text-base font-medium rounded-full transition-all shadow-xl shadow-brand-teal/25 flex items-center justify-center gap-2"
            >
              送信する
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
              </svg>
            </button>

            <!-- Success Message -->
            <div id="form-success" class="hidden p-6 bg-green-50 border border-green-200 rounded-2xl">
              <div class="flex items-center gap-3">
                <svg class="w-6 h-6 text-green-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                <div>
                  <h3 class="font-semibold text-green-900">送信完了しました</h3>
                  <p class="text-sm text-green-700 mt-1">お問い合わせありがとうございます。内容を確認次第、ご連絡いたします。</p>
                </div>
              </div>
            </div>

            <!-- Error Message -->
            <div id="form-error" class="hidden p-6 bg-red-50 border border-red-200 rounded-2xl">
              <div class="flex items-center gap-3">
                <svg class="w-6 h-6 text-red-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                <div>
                  <h3 class="font-semibold text-red-900">エラーが発生しました</h3>
                  <p class="text-sm text-red-700 mt-1">もう一度お試しいただくか、お電話でお問い合わせください。</p>
                </div>
              </div>
            </div>
          </form>

          <script>
            const form = document.getElementById('contact-form');
            const successMsg = document.getElementById('form-success');
            const errorMsg = document.getElementById('form-error');
            const submitBtn = form.querySelector('button[type="submit"]');

            form.addEventListener('submit', async (e) => {
              e.preventDefault();

              // Hide messages
              successMsg.classList.add('hidden');
              errorMsg.classList.add('hidden');

              // Disable button and show loading
              submitBtn.disabled = true;
              submitBtn.innerHTML = `
                <svg class="w-5 h-5 animate-spin" fill="none" viewBox="0 0 24 24">
                  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                  <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                送信中...
              `;

              const formData = new FormData(form);

              try {
                const response = await fetch('https://api.web3forms.com/submit', {
                  method: 'POST',
                  body: formData
                });

                const result = await response.json();

                if (result.success) {
                  // Show success message
                  successMsg.classList.remove('hidden');
                  form.reset();
                  // Scroll to success message
                  successMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
                } else {
                  throw new Error(result.message || '送信に失敗しました');
                }
              } catch (error) {
                console.error('Form submission error:', error);
                errorMsg.classList.remove('hidden');
                errorMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
              } finally {
                // Reset button
                submitBtn.disabled = false;
                submitBtn.innerHTML = `
                  送信する
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                  </svg>
                `;
              }
            });
          </script>
        </div>
      </ScaleIn>
    </div>
  </section>

  <!-- Contact Info -->
  <section class="pt-20 py-24 px-6 bg-white">
    <div class="max-w-7xl mx-auto">
      <FadeIn>
        <div class="text-center mb-16">
          <h2 class="text-3xl sm:text-4xl font-bold text-slate-900 mb-4">
            お電話でのお問い合わせ
          </h2>
        </div>
      </FadeIn>

      <div class="grid md:grid-cols-3 gap-8 max-w-4xl mx-auto">
        <ScaleIn delay={0} from={0.95}>
          <div class="text-center">
            <div class="w-16 h-16 bg-brand-teal/10 rounded-2xl flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-brand-teal" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
              </svg>
            </div>
            <h3 class="text-lg font-semibold text-slate-900 mb-2">電話番号</h3>
            <p class="text-slate-600">03-6222-8452</p>
            <p class="text-sm text-slate-500 mt-1">受付時間: 平日 9:00-18:00</p>
          </div>
        </ScaleIn>

        <ScaleIn delay={100} from={0.95}>
          <div class="text-center">
            <div class="w-16 h-16 bg-brand-teal/10 rounded-2xl flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-brand-teal" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
            </div>
            <h3 class="text-lg font-semibold text-slate-900 mb-2">住所</h3>
            <p class="text-slate-600">〒104-0033</p>
            <p class="text-slate-600">東京都中央区新川1-14-5<br/>金盃第3ビル7F</p>
          </div>
        </ScaleIn>

        <ScaleIn delay={200} from={0.95}>
          <div class="text-center">
            <div class="w-16 h-16 bg-brand-teal/10 rounded-2xl flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-brand-teal" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
              </svg>
            </div>
            <h3 class="text-lg font-semibold text-slate-900 mb-2">メール</h3>
            <p class="text-slate-600">info@swiftechie.com</p>
            <p class="text-sm text-slate-500 mt-1">24時間受付中</p>
          </div>
        </ScaleIn>
      </div>
    </div>
  </section>

  <Footer />
</BaseLayout>
