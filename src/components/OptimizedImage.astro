---
/**
 * OptimizedImage Component - Astro Image 组件使用示例
 *
 * 重要说明：
 * 1. Astro Image 组件只能处理 src/assets/ 目录下的图片
 * 2. public/ 目录下的图片无法使用 Image 组件优化
 * 3. 当前图片在 public/assets/images/，暂时使用传统 img 标签
 *
 * 迁移步骤：
 * 1. 将图片从 public/assets/images/ 移到 src/assets/images/
 * 2. 使用 import 导入图片
 * 3. 使用 <Image /> 组件替代 <img /> 标签
 */
interface Props {
  src: string;
  alt: string;
  width?: number;
  height?: number;
  class?: string;
  loading?: 'lazy' | 'eager';
}

const {
  src,
  alt,
  width = 800,
  height = 600,
  class: className = '',
  loading = 'lazy'
} = Astro.props;

// 处理图片路径
const imageSrc = src.startsWith('/') ? src : `/${src}`;
---

<!-- 当前使用传统 img 标签（适用于 public 目录） -->
<img
  src={imageSrc}
  alt={alt}
  width={width}
  height={height}
  loading={loading}
  decoding="async"
  class={className}
/>

{/*
  ========================================
  使用 Astro Image 组件的示例
  ========================================

  1. 首先将图片移到 src/assets/images/products/
  2. 然后在组件顶部导入：

  ---
  import { Image } from 'astro:assets';
  import productHero from '~/assets/images/products/popohu-hero.png';
  ---

  3. 使用 Image 组件：

  <Image
    src={productHero}
    alt={alt}
    width={width}
    height={height}
    format="webp"
    widths={[400, 800, 1200]}
    loading={loading}
    class={className}
  />

  优势：
  - 自动转换为 WebP 格式
  - 响应式图片（多个尺寸）
  - 自动优化压缩
  - 文件大小减少 50-70%
*/}
